<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Techevents</title>
  <link rel="stylesheet" href="fee.css">
   
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=home" />
</head>
<body>
     <header>
    <a style="text-decoration: none;" href="https://aits-tpt.edu.in/ " ><h1 id="logo" class="text-danger" >ANNAMACHARYA</h1></a>
    <H4 id="logo2" >institute of technology & sciences</H4>
        <div  class="button">
  <a href="index.html"><button  id="one" class="btnn" >home</button></a>
    <a href="fee.html"><button   class="btnn" >Fee</button></a>
    <a href="tech.html">  <button class="btnn" >Techevents</button></a>
   <a href="exams.html"> <button class="btnn ">Exams</button></a>
    <a href="resources.html"><button  class="btnn" >Resources</button></a>
   <a href="contactus.html"><button class="btnn">Contactus</button></a>
    <br><br>
    </div> 

    <div id="line"></div>
   </header>
   <main>
<div class="container">
    <h2 id="heading">Latest Notifications</h2>
    <ul id="notifications"></ul>
    <div class="footer">Last updated: <span id="lastUpdated"></span></div>
  </div>

  <script>
  const SHEET_ID = "1zpaxSkLJ4uE3WAtrVvvYdONX1uezIfh2yGkg7MjfVCU";
  const SHEET_GID = "tech sheet";            
  const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vReljhcyPHNF0gfDWrIys8hwglSVLg9z_84mDKDyPF6DfETrsqrBFWk90pz5Pb2UfR-3OPSlL_eKi_S/pub?output=csv";

  // ✅ Regex to detect common date formats (10/09/2025, 10-09-2025, 10.09.2025)
  const dateRegex = /\b\d{1,2}[\/\-.]\d{1,2}[\/\-.]\d{2,4}\b/g;

  async function loadNotifications() {
    try {
      const response = await fetch(CSV_URL + "&nocache=" + Date.now(), { cache: "no-store" });
      const text = await response.text();

      const rows = text.split("\n").map(r => r.trim()).filter(r => r);
      const list = document.getElementById("notifications");
      list.innerHTML = ""; 

      rows.slice(1).reverse().forEach(r => {
        const cols = r.split(",");
        let firstCol = cols[0].replace(/"/g, "").trim();

        if (firstCol && firstCol.toLowerCase() !== "undefined") {
          // ✅ Highlight date only
          firstCol = firstCol.replace(
            dateRegex, 
            `<span style="background:yellow; font-weight:bold; padding:2px 4px; border-radius:4px;">$&</span>`
          );

          const li = document.createElement("li");
          li.innerHTML = firstCol;  // ⬅️ use innerHTML instead of textContent
          list.appendChild(li);
        }
      });

      document.getElementById("lastUpdated").textContent = new Date().toLocaleTimeString();
    } catch (err) {
      console.error("Error loading sheet:", err);
    }
  }

  loadNotifications();
  setInterval(loadNotifications, 7000);
</script>

   </main>
  
</body>
</html>
  
